import"./modulepreload-polyfill-B5Qt9EMX.js";const p="https://openmarket.weniv.co.kr",h=()=>{console.log("header.html"),fetch("header.html").then(e=>e.text()).then(e=>{document.querySelector("header").outerHTML=e,fetch("/open-market-service/manifest.json").then(t=>t.json()).then(t=>{const o=t["src/js/header.js"],n=document.createElement("script");n.src=`/open-market-service/${o}`,n.type="module",n.onload=()=>console.log("header.js 로드 완료"),n.onerror=c=>console.error("header.js 로드 실패",c),document.body.appendChild(n)})})},g=()=>{fetch("footer.html").then(e=>e.text()).then(e=>{document.querySelector("footer").outerHTML=e})};document.addEventListener("DOMContentLoaded",()=>{h(),g(),L()});const i=e=>{const t=Math.floor((e-1)/10)*10+1,o=t+9;return[t,o]},f=e=>{const t=document.querySelector(".pagination ul"),o=document.getElementById("prev"),n=document.getElementById("next");Array.from(t.children).filter(l=>!l.querySelector("button")).forEach(l=>t.removeChild(l));const r=parseInt(new URLSearchParams(window.location.search).get("page")||1,10);let s=i(r)[0],d=e<i(r)[1]?e:i(r)[1];if(console.log("startPage",s,"endPage",d),e>1){const l=n.parentElement;n.onclick=()=>{let a=1;r+10<=e?a=r+10:a=e<i(r+10)[1]?e:i(r+10)[1],window.location.href=`./?page=${a}`,s+=10,d+=10},r>10?o.onclick=()=>{window.location.href=`./?page=${r-10}`,s-=10,d-=10}:o.disabled=!0;for(let a=s;a<=d;a++){const m=document.createElement("li"),u=document.createElement("a");u.href=`./?page=${a}`,u.textContent=a,m.appendChild(u),r===a&&m.classList.add("current"),t.insertBefore(m,l)}}},$=async()=>{const e=new URL(window.location.href),o=new URLSearchParams(e.search).get("page")||1;try{const n=await fetch(`${p}/products/?page=${o}`);if(n.ok){const c=await n.json();return console.log(c),f(Math.ceil(c.count/15)),c.results}else return null}catch(n){return console.error("상품 불러오기 오류:",n),null}},L=async()=>{const e=document.querySelector(".product-list ol");e.innerHTML="";try{const t=await $();console.log(t),t.forEach(o=>{w(o)})}catch(t){console.log(t)}},w=e=>{const t=document.querySelector(".product-list ol"),o=document.createElement("li");o.id=e.product_id;const n=document.createElement("a");n.href=`./product?id=${e.product_id}`;const c=document.createElement("img");c.src=e.image,c.alt=e.product_name,n.appendChild(c);const r=document.createElement("p"),s=document.createElement("a");n.href=`./product?id=${e.product_id}`;const d=document.createElement("p");r.classList.add("store-name"),s.classList.add("product-name"),d.classList.add("product-price"),r.textContent=e.store_name,s.textContent=e.product_name;const l=new Intl.NumberFormat("ko-KR");d.innerHTML=`<em>${l.format(e.price)}</em>원`,o.appendChild(n),o.appendChild(r),o.appendChild(s),o.appendChild(d),t.appendChild(o)};
