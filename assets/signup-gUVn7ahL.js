import"./modulepreload-polyfill-B5Qt9EMX.js";const h="data:image/svg+xml,%3csvg%20width='28'%20height='28'%20viewBox='0%200%2028%2028'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='14'%20cy='14'%20r='14'%20fill='%23F2F2F2'/%3e%3cpath%20d='M7%2013.8571L12.6%2019L21%2010'%20stroke='white'%20stroke-width='2'/%3e%3c/svg%3e",w="data:image/svg+xml,%3csvg%20width='28'%20height='28'%20viewBox='0%200%2028%2028'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='14'%20cy='14'%20r='14'%20fill='%2321BF48'/%3e%3cpath%20d='M7%2013.8571L12.6%2019L21%2010'%20stroke='white'%20stroke-width='2'/%3e%3c/svg%3e",i="https://openmarket.weniv.co.kr";document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("signup-form");t.querySelectorAll("input").forEach(n=>{n.addEventListener("keydown",r=>{if(r.key==="Enter")return r.preventDefault(),!1})});const e=document.getElementById("buyer"),s=document.getElementById("seller");t.dataset.signupType="BUYER",e.classList.add("active"),e.addEventListener("click",()=>{l("BUYER")}),s.addEventListener("click",()=>{l("SELLER")});const l=n=>{t.dataset.signupType=n,e.classList.toggle("active",n==="BUYER"),s.classList.toggle("active",n==="SELLER")},o=document.getElementById("id"),u=document.getElementById("double-check"),c=document.getElementById("id-message");u.addEventListener("click",async n=>{n.preventDefault();const r=await I(o.value);Object.keys(r)[0]==="FAIL_Message"?(c.classList.add("error"),o.classList.add("error"),o.classList.remove("active"),c.textContent=r.FAIL_Message):(c.classList.remove("error"),o.classList.remove("error"),o.classList.add("active"),c.textContent=r.Success)}),o.addEventListener("click",()=>{o.classList.remove("error"),c.classList.remove("error"),c.textContent=""});const a=document.getElementById("password");a.addEventListener("keyup",()=>{L(a.value)?a.style.backgroundImage=`url(${w})`:a.style.backgroundImage=`url(${h})`});const m=document.getElementById("check-password"),d=document.getElementById("password-error-message");m.addEventListener("keyup",()=>{f()?d.style.display="none":d.style.display="block"});const p=document.getElementById("phone-1"),g=document.getElementById("phone-2"),v=document.getElementById("phone-3");document.querySelectorAll('input[type="number"]').forEach(n=>{n.addEventListener("input",function(){this.value.length>4&&(this.value=this.value.slice(0,4))})});const y=document.getElementById("name");t.addEventListener("submit",n=>{n.preventDefault();const r={username:o.value,password:a.value,password2:a.value,phone_number:p.value+g.value+v.value,name:y.value};E(r)})});const E=async t=>{console.log(JSON.stringify(t));try{const e=await fetch(`${i}/accounts/signup/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(e.ok){const s=await e.json();return console.log(s),alert("회원가입이 완료되었습니다."),window.location.href="./login.html",!0}else{const s=await e.json();return console.log(s),alert(s),!1}}catch(e){return console.error(e),!1}},f=()=>{const t=document.getElementById("password"),e=document.getElementById("check-password");return console.log(t.value,e.value),t.value===e.value},L=t=>!!/^(?=.*[a-z])(?=.*\d).{8,}$/.test(t),I=async t=>{console.log(t);try{const e=await fetch(`${i}/accounts/signup/valid/username/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t})});if(e.ok){const s=await e.json();return console.log(s),s}else{const s=await e.json();return console.log(s),s}}catch(e){return console.error(e),null}};
