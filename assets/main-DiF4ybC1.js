import"./modulepreload-polyfill-B5Qt9EMX.js";const m="https://openmarket.weniv.co.kr";document.addEventListener("DOMContentLoaded",()=>{f()});const l=e=>{const n=Math.floor((e-1)/10)*10+1,t=n+9;return[n,t]},g=e=>{const n=document.querySelector(".pagination ul"),t=document.getElementById("prev"),c=document.getElementById("next");Array.from(n.children).filter(i=>!i.querySelector("button")).forEach(i=>n.removeChild(i));const o=parseInt(new URLSearchParams(window.location.search).get("page")||1,10);let s=l(o)[0],d=e<l(o)[1]?e:l(o)[1];if(console.log("startPage",s,"endPage",d),e>1){const i=c.parentElement;c.onclick=()=>{let r=1;o+10<=e?r=o+10:r=e<l(o+10)[1]?e:l(o+10)[1],window.location.href=`./?page=${r}`,s+=10,d+=10},o>10?t.onclick=()=>{window.location.href=`./?page=${o-10}`,s-=10,d-=10}:t.disabled=!0;for(let r=s;r<=d;r++){const p=document.createElement("li"),u=document.createElement("a");u.href=`./?page=${r}`,u.textContent=r,p.appendChild(u),o===r&&p.classList.add("current"),n.insertBefore(p,i)}}},h=async()=>{const e=new URL(window.location.href),t=new URLSearchParams(e.search).get("page")||1;try{const c=await fetch(`${m}/products/?page=${t}`);if(c.ok){const a=await c.json();return console.log(a),g(Math.ceil(a.count/15)),a.results}else return null}catch(c){return console.error("상품 불러오기 오류:",c),null}},f=async()=>{const e=document.querySelector(".product-list ol");e.innerHTML="";try{const n=await h();console.log(n),n.forEach(t=>{$(t)})}catch(n){console.log(n)}},$=e=>{const n=document.querySelector(".product-list ol"),t=document.createElement("li");t.id=e.product_id;const c=document.createElement("a");c.href=`./product?id=${e.product_id}`;const a=document.createElement("img");a.src=e.image,a.alt=e.product_name,c.appendChild(a);const o=document.createElement("p"),s=document.createElement("a");c.href=`./product?id=${e.product_id}`;const d=document.createElement("p");o.classList.add("store-name"),s.classList.add("product-name"),d.classList.add("product-price"),o.textContent=e.store_name,s.textContent=e.product_name;const i=new Intl.NumberFormat("ko-KR");d.innerHTML=`<em>${i.format(e.price)}</em>원`,t.appendChild(c),t.appendChild(o),t.appendChild(s),t.appendChild(d),n.appendChild(t)};
